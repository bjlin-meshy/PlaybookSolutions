/**
 * Visual Effects Styles for Meshy Solution Playbook
 * 统一的视觉效果样式
 */

/* ============================================
   CSS Variables for Visual Effects
   ============================================ */
:root {
  /* 动画时间曲线 */
  --ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
  --ease-elastic: cubic-bezier(0.68, -0.55, 0.265, 1.55);
  --ease-smooth: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  
  /* 视差强度 */
  --parallax-slow: 0.3;
  --parallax-fast: 0.8;
  
  /* 光标效果 */
  --cursor-size: 20px;
  --cursor-follower-size: 40px;
  --cursor-color: var(--accent-primary, #CCFF00);
}

/* ============================================
   Custom Cursor
   ============================================ */
.custom-cursor {
  position: fixed;
  width: var(--cursor-size);
  height: var(--cursor-size);
  background: var(--cursor-color);
  border-radius: 50%;
  pointer-events: none;
  z-index: 99999;
  mix-blend-mode: difference;
  transform: translate(-50%, -50%);
  transition: width 0.2s, height 0.2s;
}

.cursor-follower {
  position: fixed;
  width: var(--cursor-follower-size);
  height: var(--cursor-follower-size);
  border: 2px solid var(--cursor-color);
  border-radius: 50%;
  pointer-events: none;
  z-index: 99998;
  transform: translate(-50%, -50%);
  opacity: 0.5;
}

/* Cursor hover states */
a:hover ~ .custom-cursor,
button:hover ~ .custom-cursor,
[data-magnetic]:hover ~ .custom-cursor {
  width: calc(var(--cursor-size) * 1.5);
  height: calc(var(--cursor-size) * 1.5);
}

/* ============================================
   Ripple Effect
   ============================================ */
.btn, [data-ripple] {
  position: relative;
  overflow: hidden;
}

.ripple-effect {
  position: absolute;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  transform: scale(0);
  animation: ripple 0.6s ease-out forwards;
  pointer-events: none;
}

@keyframes ripple {
  to {
    transform: scale(4);
    opacity: 0;
  }
}

/* ============================================
   Card Tilt Effect
   ============================================ */
[data-tilt] {
  transition: transform 0.1s ease-out;
  transform-style: preserve-3d;
}

/* ============================================
   Scroll Animations
   ============================================ */
[data-scroll-animate] {
  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.6s var(--ease-smooth), transform 0.6s var(--ease-smooth);
}

[data-scroll-animate].animate-in {
  opacity: 1;
  transform: translateY(0);
}

/* Fade variants */
[data-scroll-animate="fade-up"] {
  transform: translateY(40px);
}

[data-scroll-animate="fade-left"] {
  transform: translateX(-40px);
}

[data-scroll-animate="fade-right"] {
  transform: translateX(40px);
}

[data-scroll-animate="zoom"] {
  transform: scale(0.9);
}

[data-scroll-animate="fade-up"].animate-in,
[data-scroll-animate="fade-left"].animate-in,
[data-scroll-animate="fade-right"].animate-in {
  transform: translate(0, 0);
}

[data-scroll-animate="zoom"].animate-in {
  transform: scale(1);
}

/* Staggered animations */
[data-scroll-animate][data-delay="1"] { transition-delay: 0.1s; }
[data-scroll-animate][data-delay="2"] { transition-delay: 0.2s; }
[data-scroll-animate][data-delay="3"] { transition-delay: 0.3s; }
[data-scroll-animate][data-delay="4"] { transition-delay: 0.4s; }
[data-scroll-animate][data-delay="5"] { transition-delay: 0.5s; }

/* ============================================
   Particle Background
   ============================================ */
.particle-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  pointer-events: none;
  z-index: 1;
}

.particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: var(--cursor-color);
  border-radius: 50%;
  opacity: 0.3;
  left: calc(var(--x) * 100%);
  top: calc(var(--y) * 100%);
  animation: float var(--duration) ease-in-out infinite;
  animation-delay: var(--delay);
}

@keyframes float {
  0%, 100% {
    transform: translateY(0) scale(1);
    opacity: 0.3;
  }
  50% {
    transform: translateY(-20px) scale(1.2);
    opacity: 0.6;
  }
}

/* ============================================
   Magnetic Button
   ============================================ */
[data-magnetic] {
  transition: transform 0.3s var(--ease-smooth);
}

/* ============================================
   Icon Bounce
   ============================================ */
[data-bounce]:hover i,
[data-bounce]:hover .icon {
  animation: bounce 0.5s var(--ease-bounce);
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

/* ============================================
   Scroll Progress Indicator
   ============================================ */
.scroll-progress {
  position: fixed;
  top: 0;
  left: 0;
  width: 0%;
  height: 3px;
  background: var(--cursor-color);
  z-index: 99999;
  transition: width 0.1s linear;
}

/* ============================================
   CSS Scroll-Driven Animations (Modern Browsers)
   ============================================ */
@supports (animation-timeline: view()) {
  .scroll-fade-in {
    animation: scrollFadeIn 1s ease both;
    animation-timeline: view();
    animation-range: entry 0% entry 100%;
  }

  @keyframes scrollFadeIn {
    from {
      opacity: 0;
      transform: translateY(50px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

/* ============================================
   View Transitions (Page Navigation)
   ============================================ */
@view-transition {
  navigation: auto;
}

::view-transition-old(root) {
  animation: fade-out 0.3s ease-out forwards;
}

::view-transition-new(root) {
  animation: fade-in 0.3s ease-in forwards;
}

@keyframes fade-out {
  to { opacity: 0; }
}

@keyframes fade-in {
  from { opacity: 0; }
}

/* ============================================
   Media Query: Reduce Motion
   ============================================ */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  .custom-cursor,
  .cursor-follower {
    display: none;
  }
}

/* ============================================
   Media Query: Mobile (Disable heavy effects)
   ============================================ */
@media (max-width: 768px) {
  .custom-cursor,
  .cursor-follower {
    display: none;
  }
  
  .particle-container {
    display: none;
  }
}
